@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "Change Company";
}

<h1>Change Company</h1>
@*<div class="row">
        <div class="col-lg-12">
            <button type="button" id="add-new-city">Add</button>
        </div>
    </div>*@

<div class="row">
    <div class="col-lg-12">
        <table id="companylistgrid" class="table table-striped table-bordered" style="width: 100%;">
            <thead>
                <tr>
                    <th>Company Id</th>
                    <th>Company Name</th>
                    <th></th>
                </tr>
            </thead>
        </table>
    </div>
</div>

<script>
$(document).ready(function () {
    $("#companylistgrid").DataTable({
        //dom: 'lftip',
        "pageLength": 20,
        //"lengthMenu": [[5, 10, 25, -1], [5, 10, 25, "All"]],
        "bPaginate": true,
        //"bInfo": true,
        //"bRetrieve": true,
        //"bFilter": true,
        //"iDisplayLength": 5,
        //"bSort": true,
        //"aaSorting": [],
        //"order": [],
        //scrollY: "50vh",
        //scrollCollapse: true,
        "ajax": {
            "url": "@Url.Action("GetCompanyList", "Home")",
            "type": "POST",
            "datatype": "json",
        },
        "columns": [
            { "data": "CompanyId", "name": "Company Id" },
            { "data": "CompanyName", "name": "Company Name" }
            ,
            {
                "render": function (data, type, full, meta) {
                    return '<div class="action_button">' +
                        '<button type="button" onclick="javascript: fnSelectCompany(' + full.CompanyId + ')">Select</button>' +
                        '</div>';
                }
            }
        ],
    });
});

    function fnSelectCompany(companyId) {
        var model = { companyId: companyId };

        alert(model.companyId);

        @*AjaxCommunication.CreateRequest(this.window, 'Get', '@Url.Action("EditCity", "City")', 'html', model,
        function (data) {
            $('#modal-city-master').empty();
            $('#modal-city-master').html(data).modal('show');
            return false;
        }, null, true, null, false);*@
    }

</script>
