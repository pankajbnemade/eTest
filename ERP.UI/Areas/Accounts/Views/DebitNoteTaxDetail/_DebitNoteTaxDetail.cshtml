<div class="modal-dialog modal-xl">
    <div class="modal-content">
        <div class="modal-header">
            <h4 class="modal-title">Debit WNote Tax Detail</h4>
            @*<div class="px-4">
                    <button class="btn btn-primary" type="button" id="add-new-debitnote-taxdetl">
                        <i class="fas fa-plus"></i>  Add
                    </button>
                </div>*@
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <div class="row">
                <div class="col-12 table-responsive">
                    <table id="debitNoteTaxDetailGrid" class="table table-bordered table-striped w-100">
                        <thead>
                            <tr class="table-header">
                                <th>
                                    <button class="btn btn-primary mr-1 p-1" type="button" id="add-new-debitnote-taxdetl">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                    Action
                                </th>
                                <th>DebitNoteDetTaxId</th>
                                <th>DebitNoteDetId</th>
                                <th>Sr No</th>
                                <th>Tax Ledger Name</th>
                                <th>Tax Percentage or Amount</th>
                                <th>TaxPer or AmountFc</th>
                                <th>Tax Add or Deduct</th>
                                <th>Tax AmountFc</th>
                                <th>Remark</th>
                            </tr>
                        </thead>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $("#debitNoteTaxDetailGrid").DataTable({
            "pageLength": 25,
            "dom": "<'row'<'col-sm-6'l><'col-sm-6'f>>" +
                "<'row'<'col-sm-12'tr>>" +
                "<'row'<'col-sm-4'i><'col-sm-4 text-center'><'col-sm-4'p>>",
            "bPaginate": true,
            /*"scrollX": true,*/
            "ajax": {
                "url": "@Url.Action("GetDebitNoteTaxDetailList", "DebitNoteTaxDetail", new { DebitNoteDetId = ViewBag.DebitNoteDetId })",
                "type": "POST",
                "datatype": "json",
            },
            "columns": [
                {
                    "orderable": false,
                    "render": function (data, type, full, meta) {
                        return '<div class="action_button">' +
                            '<button type="button" class="border-0 rounded-0 text-success" onclick="javascript: fnEditDebitNoteTaxDetail(' + full.DebitNoteDetTaxId + ')"><span class="fa fa-pencil-alt"></span></button>' +
                            '<button type="button" class="border-0 rounded-0 text-danger" data-toggle="modal" onclick="javascript: fnDeleteDebitNoteTaxDetail(this, ' + full.DebitNoteDetTaxId + ')"><span class="fa fa-trash-alt"></span></button>' +
                            '</div>';
                    }
                },
                { "data": "DebitNoteDetTaxId", "name": "DebitNoteDetTaxId", "visible": false },
                { "data": "DebitNoteDetId", "name": "DebitNoteDetId", "visible": false },
                { "data": "SrNo", "name": "SrNo" },
                { "data": "TaxLedgerName", "name": "TaxLedgerName" },
                { "data": "TaxPercentageOrAmount", "name": "TaxPercentageOrAmount" },
                { "data": "TaxPerOrAmountFc", "name": "TaxPerOrAmountFc", render: $.fn.dataTable.render.number(',', '.', 2, '') },
                { "data": "TaxAddOrDeduct", "name": "TaxAddOrDeduct" },
                { "data": "TaxAmountFc", "name": "TaxAmountFc", render: $.fn.dataTable.render.number(',', '.', 2, '')},
                { "data": "Remark", "name": "Remark" }
            ],
        });
    });

    // add debitnote tax detail.
    $('#add-new-debitnote-taxdetl').click(function () {
        var model = { debitNoteDetId: '@ViewBag.DebitNoteDetId' };
        AjaxCommunication.CreateRequest(this.window, 'Get', '@Url.Action("AddDebitNoteTaxDetail", "DebitNoteTaxDetail")', 'html', model,
        function (data) {
            $('#modal-debitnote-detail').empty();
            $('#modal-debitnote-detail').html(data).modal('show');
            return false;
        }, null, true, null, false);
    });

     // edit debitnote tax detail.
    function fnEditDebitNoteTaxDetail(debitNoteDetTaxId) {
        var model = { debitNoteDetTaxId: debitNoteDetTaxId };
        AjaxCommunication.CreateRequest(this.window, 'Get', '@Url.Action("EditDebitNoteTaxDetail", "DebitNoteTaxDetail")', 'html', model,
        function (data) {
            $('#modal-debitnote-detail').empty();
            $('#modal-debitnote-detail').html(data).modal('show');
            return false;
        }, null, true, null, false);
    }
</script>
@{ await Html.RenderPartialAsync("_ConfirmDeleteDebitNoteTaxDetail"); }
<style>
    /*#modal-debitnote .modal-dialog {
        height: 90%;*/ /* = 90% of the .modal-backdrop block = %90 of the screen */
    /*}

    #modal-debitnote .modal-content {
        height: 100%;*/ /* = 100% of the .modal-dialog block */
    /*}

    #modal-debitnote .modal-body {
        height: 300px;
        overflow-y: auto;
    }

    @@media (min-height: 500px) {
        #modal-debitnote .modal-body {
            height: 400px;
        }
    }

    @@media (min-height: 800px) {
        #modal-debitnote .modal-body {
            height: 600px;
        }
    }*/
</style>
